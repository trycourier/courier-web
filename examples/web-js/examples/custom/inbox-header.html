<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Courier Inbox</title>
  <link rel="stylesheet" href="./../../styles.css">
</head>

<body>

  <courier-inbox id="inbox"></courier-inbox>

  <script type="module">
    import { Courier } from '@trycourier/courier-ui-inbox';

    // Authenticate the user with the inbox
    Courier.shared.signIn({
      userId: import.meta.env.VITE_USER_ID,
      jwt: import.meta.env.VITE_JWT
    });

    // Reference the courier-inbox element
    const inbox = document.getElementById('inbox');

    // Remove the header
    inbox.removeHeader();

    // Set a custom header
    inbox.setHeader((props) => {
      console.log('props', props);
      const headerDiv = document.createElement('div');
      headerDiv.style.background = 'red';
      headerDiv.style.fontSize = '24px';
      headerDiv.style.padding = '24px';
      headerDiv.style.width = '100%';
      const selectedFeed = props.feeds.find(feed => feed.isSelected);
      const selectedTab = selectedFeed?.tabs.find(tab => tab.isSelected);
      headerDiv.textContent = `${selectedFeed?.id ?? ''} - ${selectedTab?.id ?? ''} - ${selectedTab?.unreadCount ?? 0}`;
      return headerDiv;
    });

    // Set the feeds
    inbox.setFeeds([
      {
        id: 'inbox',
        title: 'Inbox',
        tabs: [
          { id: 'inbox', title: 'Inbox', filter: {} }
        ]
      },
      {
        id: 'archive',
        title: 'Archive',
        tabs: [
          { id: 'archive_1', title: 'Archive 1', filter: { archived: true } },
          { id: 'archive_2', title: 'Archive 2', filter: { archived: true } }
        ]
      }
    ]);

    // Select the feed and tab
    inbox.selectFeed('archive');
    inbox.selectTab('archive_2');

  </script>

</body>

</html>